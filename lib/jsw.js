// Generated by CoffeeScript 1.9.3

/*
  jsw.coffee
  A translator for an alternate Javascript syntax that uses significant whitespace
 */

(function() {
  var args, file, fs, i, jsIn, jsInAst, jsOut, len, log, pfx, ref, uglify, util;

  log = require('debug')('jsw');

  fs = require('fs');

  util = require('util');

  args = require('./args');

  uglify = require("uglify-js2");

  ref = args.files;
  for (i = 0, len = ref.length; i < len; i++) {
    file = ref[i];
    pfx = 'test/';
    jsIn = fs.readFileSync(file, 'utf8');
    if (args.parse) {
      jsInAst = uglify.parse(jsIn);
      fs.writeFileSync(pfx + 'in-ast.json', JSON.stringify(jsInAst));
    } else {
      log('not parse');
      jsInAst = JSON.parse(fs.readFileSync(pfx + 'in-ast.json', 'utf8'));
    }
    if (args.gen) {
      jsOut = '';
      fs.writeFileSync(pfx + 'mirror.js', jsOut);
    }
  }

}).call(this);
